{% load humanize %}
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™¼ç¥¨è©³æƒ…</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .navbar {
            background-color: #6f5499;
        }
        .nav-link {
            color: white !important;
        }
        .table th, .table td {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .btn-spacing {
            margin-right: 15px;
        }
        .btn-container {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .invoice-detail-table-1 {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            font-size: 18px;
        }

        .invoice-detail-table-1 th,
        .invoice-detail-table-1 td {
            border: 1px solid #000;
            padding: 6px 10px;
            vertical-align: top;
            word-wrap: break-word;
            text-align: left !important;
        }

        .invoice-detail-table-1 th {
            width: 25%;
            background-color: #f5f5f5;  /* æ·ºç°åº• */
            text-align: right;
            white-space: nowrap;
        }

        .invoice-detail-tabl-1 td {
            background-color: #ffffff;  /* ç™½åº• */
            width: 75%;
        }
        .invoice-detail-table-2 {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            font-size: 18px;
        }

        .invoice-detail-table-2 th,
        .invoice-detail-table-2 td {
            border: 1px solid #000;
            padding: 6px 10px;
            vertical-align: top;
            word-wrap: break-word;
            text-align: left!important;
        }

        .invoice-detail-table-2 th {
            width: 35%;
            background-color: #f5f5f5;  /* æ·ºç°åº• */
            text-align: right;
            white-space: nowrap;
        }

        .invoice-detail-table-2 td {
            background-color: #ffffff;  /* ç™½åº• */
            width: 65%;
        }

        .invoice-item-table {
            margin-top: 30px;
        }

    </style>
</head>
<body>

<!-- é ‚éƒ¨å°èˆªæ¬„ -->

<!-- ç™¼ç¥¨è©³æƒ… -->
<div class="container mt-4" style="border: 1px solid black; padding:20px;">
    <div class="d-flex justify-content-between mb-3">
        <!-- <a href="{% url 'twb2bmainitem' %}" class="btn btn-secondary back-button">â† è¿”å›ç™¼ç¥¨åˆ—è¡¨</a> -->
            {% if request.user.groups.all.0.name == 'keyuser' or request.user.is_superuser %}
                {% if document.invoice_status == 'æœªé–‹ç«‹' %}
                    <!-- âœ… æ¬Šé™å¤ ï¼Œç™¼ç¥¨æœªé–‹ç«‹ï¼Œå®Œæ•´ä¿®æ”¹ -->
                    <button type="button" id="edit_button" class="btn btn-primary">ä¿®æ”¹</button>

                {% elif document.invoice_status == 'å·²é–‹ç«‹' %}
                    <!-- âš ï¸ æ¬Šé™å¤ ï¼Œç™¼ç¥¨å·²é–‹ç«‹ï¼Œåªèƒ½ä¿®æ”¹éƒ¨åˆ†æ¬„ä½ -->
                    <button type="button" id="partial_edit_button" class="btn btn-warning">å¡«å¯«ä½œå»¢ç†ç”±</button>

                {% else %}
                    <!-- âŒ æ¬Šé™å¤ ä½†ç‹€æ…‹ä¸å…è¨± -->
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#wrongStatusModal">ä¿®æ”¹</button>
                {% endif %}

            {% else %}
                <!-- âŒ æ¬Šé™ä¸å¤  -->
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#noPermissionModal">ä¿®æ”¹</button>
            {% endif %}
    </div>

<!-- 
    <h3 calss="mt-3">ç™¼ç¥¨è©³æƒ…</h3>

    <p><strong>ç™¼ç¥¨è™Ÿç¢¼:</strong> {{ document.invoice_number }}</p>
    <p><strong>ç‡Ÿæ¥­äººåç¨±:</strong> {{ document.company.company_id }}</p>
    <p><strong>ç™¼ç¥¨æœŸåˆ¥:</strong> {{ document.invoice_period }}</p>
    <p><strong>ç™¼ç¥¨æ—¥æœŸ:</strong> {{ document.invoice_date|default:"" }}</p>
    <p><strong>ç¸½é‡‘é¡:</strong> {{ document.total_amount|floatformat:1|intcomma }}</p>
    <p><strong>æ˜¯å¦å·²é–‹ç«‹æŠ˜è®“å–®:</strong> {{ document.allowance_status }}</p>
    <p><strong>å·²é–‹ç«‹çš„æŠ˜è®“å–®è™Ÿ:</strong>
    {% for allowance in related_allowances %}
        {{ allowance.allowance_number }}{% if not forloop.last %}, {% endif %}
      {% empty %}
        ç„¡
      {% endfor %}
    </p>
    <p><strong>ç´¯è¨ˆæŠ˜è®“é‡‘é¡:</strong> {{ total_allowanced_amount|default:"0"|floatformat:1|intcomma }}</p>
    <p><strong>å‰©é¤˜å¯æŠ˜è®“é‡‘é¡:</strong> {{ available_amount|floatformat:1|intcomma }}</p>
    <p><strong>å‰©é¤˜å¯æŠ˜è®“ç¨…é¡:</strong> {{ available_tax|floatformat:1|intcomma }}</p> -->
<h5 class="mt-4 mb-2">ğŸ“¦ ç™¼ç¥¨è³‡è¨Š</h5>
    <div class="container">
    <div class="row">
        <!-- å·¦é‚Šï¼šç™¼ç¥¨è³‡è¨Šï¼ˆ4~5ç­†ï¼‰ -->
        <div class="col-md-6">
        <table class="invoice-detail-table-1">
            <tr>
            <th>ç™¼ç¥¨è™Ÿç¢¼:</th>
            <td>{{ document.invoice_number }}</td>
            </tr>
            <tr>
            <th>ç‡Ÿæ¥­äººåç¨±:</th>
            <td>{{ document.company.company_id }}</td>
            </tr>
            <tr>
            <th>ç™¼ç¥¨æœŸåˆ¥:</th>
            <td>{{ document.invoice_period }}</td>
            </tr>
            <tr>
            <th>ç™¼ç¥¨æ—¥æœŸ:</th>
            <td>{{ document.invoice_date|default:"" }}</td>
            </tr>
            <tr>
            <th>ç¸½é‡‘é¡:</th>
            <td>{{ document.total_amount|floatformat:1|intcomma }}</td>
            </tr>
        </table>
        </div>

        <!-- å³é‚Šï¼šæŠ˜è®“è³‡è¨Šï¼ˆ6ç­†ï¼‰ -->
        <div class="col-md-6">
        <table class="invoice-detail-table-2">
            <tr>
            <th>æ˜¯å¦å·²é–‹ç«‹æŠ˜è®“å–®:</th>
            <td>{{ document.allowance_status }}</td>
            </tr>
            <tr>
            <th>å·²é–‹ç«‹çš„æŠ˜è®“å–®è™Ÿ:</th>
            <td>
                {% for allowance in related_allowances %}
                {{ allowance.allowance_number }}{% if not forloop.last %}, {% endif %}
                {% empty %}
                ç„¡
                {% endfor %}
            </td>
            </tr>
            <tr>
            <th>ç´¯è¨ˆæŠ˜è®“é‡‘é¡:</th>
            <td>{{ total_allowanced_amount|default:"0"|floatformat:1|intcomma }}</td>
            </tr>
            <tr>
            <th>å‰©é¤˜å¯æŠ˜è®“é‡‘é¡:</th>
            <td>{{ available_amount|floatformat:1|intcomma }}</td>
            </tr>
            <tr>
            <th>å‰©é¤˜å¯æŠ˜è®“ç¨…é¡:</th>
            <td>{{ available_tax|floatformat:1|intcomma }}</td>
            </tr>
        </table>
        </div>
    </div>
    </div>

    <form method="POST" action="{% url 'twb2blineitem_update' document.id %}">
        {% csrf_token %}

        <!-- <div class="mb-3 d-flex align-items-center">
            <label for="invoice_period" class="form-label me-2 mb-0" style="width: 120px;">ç™¼ç¥¨æœŸåˆ¥:</label>
            <input type="text" class="form-control" id="invoice_period" name="invoice_period" value="{{ document.invoice_period }}" disabled style="max-width: 100px;">
        </div> -->

        <!-- <div class="mb-3 d-flex align-items-center">
            <label for="erp_reference" class="form-label me-2 mb-0" style="width: 120px;">ERPåƒè€ƒç·¨è™Ÿ:</label>
            <input type="text" class="form-control" id="erp_reference" name="erp_reference" value="{{ document.erp_reference }}">
        </div> -->


    <h5 class="mt-4 mb-2">ğŸ“¦ å•†å“æ˜ç´°</h5>
        <table class="table table-striped table-hover">
            
            <thead>
                <tr>
                    <th>å•†å“åç¨±</th>
                    <th>æ•¸é‡</th>
                    <th>å–®åƒ¹</th>
                    <th>ç¨…åˆ¥</th>
                    <th>ç¨…ç‡</th>
                    <th>ç¨…é‡‘</th>
                    <th>ç¨…å¾ŒéŠ·å”®é‡‘é¡</th>
                    <th>éŠ·å”®é‡‘é¡</th>
                    <th>å‚™è¨»</th>
                </tr>
            </thead>
            <tbody>
                {% for item in document.items.all %}
                <tr>
                    <td>{{ item.line_description }}</td>
                    <td>{{ item.line_quantity }}</td>
                    <td>{{ item.line_unit_price|floatformat:1|intcomma }}</td>
                    <td>
                        {% if item.line_tax_type == 1 %}
                            æ‡‰ç¨…
                        {% elif item.line_tax_type == 2 %}
                            é›¶ç¨…ç‡
                        {% else %}
                            å…ç¨…
                        {% endif %}
                    </td>
                    <td>{{ item.tax_rate }}</td>
                    <td>{{ item.line_tax_amount|floatformat:1|intcomma }}</td>
                    <td>{{ item.line_sales_amount|floatformat:1|intcomma }}</td>
                    <td>{{ item.line_amount|floatformat:1|intcomma }}</td>
                    <td>
                        <input type="text" class="form-control" id="{{ item.id }}_line_remark" name="line_remark_{{ item.id }}" value="{{ item.line_remark }}" disabled>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="9" class="text-center">æ²’æœ‰ç™¼ç¥¨é …ç›®</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
                <!-- ä¸»ç™¼ç¥¨æ¬„ä½ (è¡¨æ ¼ä¸Šæ–¹) -->
                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="bonded_area_confirm" class="form-label">è²·å—äººç°½ç½²é©ç”¨é›¶ç¨…ç‡è¨»è¨˜</label>
                        <select class="form-select" id="bonded_area_confirm" name="bonded_area_confirm" disabled>
                            <option value="">-- é›¶ç¨…ç‡ç™¼ç¥¨å¿…å¡« --</option>
                            <option value="1" {% if document.bonded_area_confirm == '1' %}selected{% endif %}>1 - è²·å—äººç‚ºä¿ç¨…å€ç‡Ÿæ¥­äºº</option>
                            <option value="2" {% if document.bonded_area_confirm == '2' %}selected{% endif %}>2 - è²·å—äººç‚ºé æ´‹æ¼æ¥­ç‡Ÿæ¥­äºº</option>
                            <option value="3" {% if document.bonded_area_confirm == '3' %}selected{% endif %}>3 - è²·å—äººç‚ºè‡ªç”±è²¿æ˜“æ¸¯å€ç‡Ÿæ¥­äºº</option>
                            <option value="4" {% if document.bonded_area_confirm == '4' %}selected{% endif %}>4 - å…¶ä»–</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="zero_tax_rate_reason" class="form-label">é›¶ç¨…ç‡åŸå› </label>
                        <select class="form-select" id="zero_tax_rate_reason" name="zero_tax_rate_reason" disabled>
                            <option value="">-- è«‹é¸æ“‡ --</option>
                            <option value="71" {% if document.zero_tax_rate_reason == '71' %}selected{% endif %}>71 - ç¬¬ä¸€æ¬¾ å¤–éŠ·è²¨ç‰©</option>
                            <option value="72" {% if document.zero_tax_rate_reason == '72' %}selected{% endif %}>72 - ç¬¬äºŒæ¬¾ èˆ‡å¤–éŠ·æœ‰é—œä¹‹å‹å‹™ï¼Œæˆ–åœ¨åœ‹å…§æä¾›è€Œåœ¨åœ‹å¤–ä½¿ç”¨ä¹‹å‹å‹™</option>
                            <option value="73" {% if document.zero_tax_rate_reason == '73' %}selected{% endif %}>73 - ç¬¬ä¸‰æ¬¾ ä¾æ³•è¨­ç«‹ä¹‹å…ç¨…å•†åº—éŠ·å”®èˆ‡éå¢ƒæˆ–å‡ºå¢ƒæ—…å®¢ä¹‹è²¨ç‰©</option>
                            <option value="74" {% if document.zero_tax_rate_reason == '74' %}selected{% endif %}>74 - ç¬¬å››æ¬¾ éŠ·å”®èˆ‡ä¿ç¨…å€ç‡Ÿæ¥­äººä¾›ç‡Ÿé‹ä¹‹è²¨ç‰©æˆ–å‹å‹™</option>
                            <option value="75" {% if document.zero_tax_rate_reason == '75' %}selected{% endif %}>75 - ç¬¬äº”æ¬¾ åœ‹éš›é–“ä¹‹é‹è¼¸ã€‚ä½†å¤–åœ‹é‹è¼¸äº‹æ¥­åœ¨ä¸­è¯æ°‘åœ‹å¢ƒå…§ç¶“ç‡Ÿåœ‹éš›é‹è¼¸æ¥­å‹™è€…ï¼Œæ‡‰ä»¥å„è©²åœ‹å°ä¸­è¯æ°‘åœ‹åœ‹éš›é‹è¼¸äº‹æ¥­äºˆä»¥ç›¸ç­‰å¾…é‡æˆ–å…å¾µé¡ä¼¼ç¨…æè€…ç‚ºé™</option>
                            <option value="76" {% if document.zero_tax_rate_reason == '76' %}selected{% endif %}>76 - ç¬¬å…­æ¬¾ åœ‹éš›é‹è¼¸ç”¨ä¹‹èˆ¹èˆ¶ã€èˆªç©ºå™¨åŠé æ´‹æ¼èˆ¹</option>
                            <option value="77" {% if document.zero_tax_rate_reason == '77' %}selected{% endif %}>77 - ç¬¬ä¸ƒæ¬¾ éŠ·å”®èˆ‡åœ‹éš›é‹è¼¸ç”¨ä¹‹èˆ¹èˆ¶ã€èˆªç©ºå™¨åŠé æ´‹æ¼èˆ¹æ‰€ä½¿ç”¨ä¹‹è²¨ç‰©æˆ–ä¿®ç¹•å‹å‹™</option>
                            <option value="78" {% if document.zero_tax_rate_reason == '78' %}selected{% endif %}>78 - ç¬¬å…«æ¬¾ ä¿ç¨…å€ç‡Ÿæ¥­äººéŠ·å”®èˆ‡èª²ç¨…å€ç‡Ÿæ¥­äººæœªè¼¸å¾€èª²ç¨…å€è€Œç›´æ¥å‡ºå£ä¹‹è²¨ç‰©</option>
                            <option value="79" {% if document.zero_tax_rate_reason == '79' %}selected{% endif %}>79 - ç¬¬ä¹æ¬¾ ä¿ç¨…å€ç‡Ÿæ¥­äººéŠ·å”®èˆ‡èª²ç¨…å€ç‡Ÿæ¥­äººå­˜å…¥è‡ªç”±æ¸¯å€äº‹æ¥­æˆ–æµ·é—œç®¡ç†ä¹‹ä¿ç¨…å€‰åº«ã€ç‰©æµä¸­å¿ƒä»¥ä¾›å¤–éŠ·ä¹‹è²¨ç‰©</option>
                        </select>
                    </div>
        
                    <div class="col-md-4">
                        <label for="customs_clearance_mark" class="form-label">é€šé—œæ–¹å¼è¨»è¨˜</label>
                        <select class="form-select" id="customs_clearance_mark" name="customs_clearance_mark" disabled>
                            <option value="">-- è«‹é¸æ“‡ --</option>
                            <option value="1" {% if document.customs_clearance_mark == '1' %}selected{% endif %}>1 - éç¶“æµ·é—œå‡ºå£</option>
                            <option value="2" {% if document.customs_clearance_mark == '2' %}selected{% endif %}>2 - ç¶“æµ·é—œå‡ºå£</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <td>
                            <label for="cancel_reason" class="form-label me-2 mb-0" style="width: 120px;">ä½œå»¢ç†ç”±:</label>
                            <input type="text" class="form-control" id="cancel_reason" name="cancel_reason" value="{{ document.cancel_reason|default_if_none:'' }}" disabled style="max-width: 1400px;">
                        </td>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <td>
                            <label for="returntax_document_number" class="form-label me-2 mb-0" style="width: 250px;">è·¨æœŸä½œå»¢éœ€å¡«å°ˆæ¡ˆä½œå»¢æ ¸å‡†æ–‡è™Ÿ:</label>
                            <input type="text" class="form-control" id="returntax_document_number" name="returntax_document_number" value="{{ document.returntax_document_number|default_if_none:'' }}" disabled style="max-width: 1400px;">
                        </td>
                    </div>
                </div>
        <div class="d-flex justify-content-between mb-3">
            <!-- <a href="javascript:history.back()" class="btn btn-secondary back-button">â† è¿”å›ä¸Šä¸€é </a> -->

            <div class="btn-container">     
                <button type="button" class="btn btn-primary" id="showConfirmModal" disabled>å„²å­˜ä¿®æ”¹</button>
            </div>
        </div>
    </form>

</div>
<!-- <script>

    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('edit_button').addEventListener('click', function () {
            // éš±è—ä¸Šæ–¹ messages å€å¡Š
            const alertBoxes = document.querySelectorAll('.alert');
            alertBoxes.forEach(box => box.remove());

            // æŠŠæ‰€æœ‰ disabled çš„ input, select éƒ½æ‰“é–‹
            const allDisabled = document.querySelectorAll('input:disabled, select:disabled');
            allDisabled.forEach(function (el) {
                el.disabled = false;
            });

            // åŒæ™‚æ‰“é–‹ "å„²å­˜ä¿®æ”¹" æŒ‰éˆ•ï¼ˆå¦‚æœä¸€é–‹å§‹ä¹Ÿè¢«é–ä½çš„è©±ï¼‰
            document.getElementById('showConfirmModal').disabled = false;
        });
    });
</script> -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const fullEditBtn = document.getElementById('edit_button');
        const partialEditBtn = document.getElementById('partial_edit_button');

        function clearAlertMessages() {
            const alertBoxes = document.querySelectorAll('.alert');
            alertBoxes.forEach(box => box.remove());
        }

        function enableAllInputs() {
            const allDisabled = document.querySelectorAll('input:disabled, select:disabled, textarea:disabled');
            allDisabled.forEach(el => el.disabled = false);
        }

        function enableOnlySpecific(ids) {
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(el => el.disabled = true); // å…¨éƒ¨å…ˆé–ä½

            ids.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.disabled = false;
            });
        }

        if (fullEditBtn) {
            fullEditBtn.addEventListener('click', function () {
                clearAlertMessages();
                enableAllInputs();
                document.getElementById('showConfirmModal').disabled = false;
            });
        }

        if (partialEditBtn) {
            partialEditBtn.addEventListener('click', function () {
                clearAlertMessages();
                enableOnlySpecific(['cancel_reason', 'returntax_document_number']);
                document.getElementById('showConfirmModal').disabled = false;
            });
        }
    });
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    const saveButton = document.getElementById("showConfirmModal");  // åŸæœ¬æ˜¯ showConfirmBtn
    const confirmSaveBtn = document.getElementById("confirmSaveBtn");
    
    const xmlSpecialCharsPattern = /[<>&'"]/;

    saveButton.addEventListener("click", function (e) {
        // æª¢æŸ¥ä¸»è¦æ¬„ä½
        const cancelReason = document.getElementById("cancel_reason")?.value || "";
        const returnTaxNumber = document.getElementById("returntax_document_number")?.value || "";

        let hasInvalidChar = xmlSpecialCharsPattern.test(cancelReason) || xmlSpecialCharsPattern.test(returnTaxNumber);

        // æª¢æŸ¥æ¯ä¸€å€‹ line_remark æ¬„ä½
        const remarkInputs = document.querySelectorAll("input[id$='_line_remark']");
        remarkInputs.forEach(input => {
            if (xmlSpecialCharsPattern.test(input.value)) {
                hasInvalidChar = true;
            }
        });

        if (hasInvalidChar) {
            // é¡¯ç¤ºéæ³•å­—å…ƒè­¦å‘Š modal
            const xmlModal = new bootstrap.Modal(document.getElementById("xmlCharModal"));
            xmlModal.show();
        } else {
            // é¡¯ç¤ºç¢ºèªé€å‡º modal
            const confirmModal = new bootstrap.Modal(document.getElementById('confirmSaveModal'));
            confirmModal.show();
        }
    });

    confirmSaveBtn.addEventListener("click", function () {
        form.submit();
    });
});
</script>

<div class="modal fade" id="noPermissionModal" tabindex="-1" aria-labelledby="noPermissionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-warning text-dark">
          <h5 class="modal-title" id="noPermissionModalLabel">æ¬Šé™ä¸è¶³</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="é—œé–‰"></button>
        </div>
        <div class="modal-body">
          æ‚¨æ²’æœ‰ä¿®æ”¹é€™ç­†ç™¼ç¥¨çš„æ¬Šé™ã€‚
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">é—œé–‰</button>
        </div>
      </div>
    </div>
  </div>
  <!-- ç‹€æ…‹éŒ¯èª¤ Modal -->

<div class="modal fade" id="wrongStatusModal" tabindex="-1" aria-labelledby="wrongStatusModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="wrongStatusModalLabel">ç‹€æ…‹ä¸å…è¨±ä¿®æ”¹</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="é—œé–‰"></button>
      </div>
      <div class="modal-body">
        åƒ…ã€æœªé–‹ç«‹ã€ç‹€æ…‹çš„ç™¼ç¥¨æˆ–æŠ˜è®“å–®æ‰å¯é€²è¡Œä¿®æ”¹æ“ä½œã€‚
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">é—œé–‰</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="xmlCharModal" tabindex="-1" aria-labelledby="xmlCharModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content border-danger">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="xmlCharModalLabel">ç„¡æ•ˆå­—å…ƒè­¦å‘Š</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="é—œé–‰"></button>
      </div>
      <div class="modal-body">
        æ¬„ä½ä¸­å«æœ‰ XML ç¦ç”¨çš„ç‰¹æ®Šå­—å…ƒï¼ˆä¾‹å¦‚ï¼š&lt;, &gt;, &amp;, &quot;, &apos;ï¼‰ï¼Œè«‹ç§»é™¤å¾Œå†å„²å­˜ã€‚
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ç¢ºå®š</button>
      </div>
    </div>
  </div>
</div>
<!-- ç¢ºèªå„²å­˜ Modal -->
<div class="modal fade" id="confirmSaveModal" tabindex="-1" aria-labelledby="confirmSaveModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="confirmSaveModalLabel">ç¢ºèªå„²å­˜è®Šæ›´</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="é—œé–‰"></button>
      </div>
      <div class="modal-body">
        æ‚¨ç¢ºå®šè¦å„²å­˜æ‰€åšçš„ä¿®æ”¹å—ï¼Ÿ
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å¦ï¼Œå–æ¶ˆå„²å­˜</button>
        <button type="button" class="btn btn-primary" id="confirmSaveBtn">æ˜¯ï¼Œå„²å­˜ä¿®æ”¹</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
